<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>UNIX之ss命令 | 奇迹之流WonderfloW</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.75.1" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.4fc0b62e4b82c997bb0041217cd6b979.css" rel="stylesheet">
    

    

    
      
<link rel="shortcut icon" href="/favicon_io/favicon.ico" type="image/x-icon" />


    

    
    
    <meta property="og:title" content="UNIX之ss命令" />
<meta property="og:description" content="ss命令用来进行统计socket连接的统计。与netstat命令相似。 这个命令之前不常用，甚至没怎么听过，直到有一天不小心想要输入ssh的时候打了ss就回车，结果出来意想不到的好东西，让我决定去学习一下。 SS能提供的信息包括： TCP连接 UDP连接 已经建立的 ssh/ftp/http/https连接 本地进程连向X服务器的连接 筛选状态(例如connected, synchronized, SYN-RECV, SYN-SENT,TIME-WAIT)、地址和端口 所有在FIN-WAIT-1状态下的TCP连接。 大多数linux发行版都涵盖ss命令以及其他一些工具，熟悉这些命令有助于多网络状态的掌握。 下面罗列出一些常用的方法。 {% codeblock %} $ ss -s #列出所有的so" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wonderflow.info/posts/2013/08/06/unixe4b98bsse591bde4bba4/" />
<meta property="article:published_time" content="2013-08-06T02:31:59+00:00" />
<meta property="article:modified_time" content="2013-08-06T02:31:59+00:00" />
<meta itemprop="name" content="UNIX之ss命令">
<meta itemprop="description" content="ss命令用来进行统计socket连接的统计。与netstat命令相似。 这个命令之前不常用，甚至没怎么听过，直到有一天不小心想要输入ssh的时候打了ss就回车，结果出来意想不到的好东西，让我决定去学习一下。 SS能提供的信息包括： TCP连接 UDP连接 已经建立的 ssh/ftp/http/https连接 本地进程连向X服务器的连接 筛选状态(例如connected, synchronized, SYN-RECV, SYN-SENT,TIME-WAIT)、地址和端口 所有在FIN-WAIT-1状态下的TCP连接。 大多数linux发行版都涵盖ss命令以及其他一些工具，熟悉这些命令有助于多网络状态的掌握。 下面罗列出一些常用的方法。 {% codeblock %} $ ss -s #列出所有的so">
<meta itemprop="datePublished" content="2013-08-06T02:31:59+00:00" />
<meta itemprop="dateModified" content="2013-08-06T02:31:59+00:00" />
<meta itemprop="wordCount" content="1121">



<meta itemprop="keywords" content="linux,ss,unix," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="UNIX之ss命令"/>
<meta name="twitter:description" content="ss命令用来进行统计socket连接的统计。与netstat命令相似。 这个命令之前不常用，甚至没怎么听过，直到有一天不小心想要输入ssh的时候打了ss就回车，结果出来意想不到的好东西，让我决定去学习一下。 SS能提供的信息包括： TCP连接 UDP连接 已经建立的 ssh/ftp/http/https连接 本地进程连向X服务器的连接 筛选状态(例如connected, synchronized, SYN-RECV, SYN-SENT,TIME-WAIT)、地址和端口 所有在FIN-WAIT-1状态下的TCP连接。 大多数linux发行版都涵盖ss命令以及其他一些工具，熟悉这些命令有助于多网络状态的掌握。 下面罗列出一些常用的方法。 {% codeblock %} $ ss -s #列出所有的so"/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    



  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        奇迹之流WonderfloW
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/archives/" title="Archives page">
              Archives
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/posts/" title="Posts page">
              Posts
            </a>
          </li>
          
        </ul>
      
      








<a href="https://github.com/wonderflow" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>








    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      

<article class="flex-l flex-wrap justify-between mw8 center ph3">
  <header class="mt4 w-100">
    <aside class="instapaper_ignoref b helvetica tracked">
      
      POSTS
    </aside>
    




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=https://wonderflow.info/posts/2013/08/06/unixe4b98bsse591bde4bba4/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=https://wonderflow.info/posts/2013/08/06/unixe4b98bsse591bde4bba4/&amp;text=UNIX%e4%b9%8bss%e5%91%bd%e4%bb%a4" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://wonderflow.info/posts/2013/08/06/unixe4b98bsse591bde4bba4/&amp;title=UNIX%e4%b9%8bss%e5%91%bd%e4%bb%a4" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>


    <h1 class="f1 athelas mt3 mb1">UNIX之ss命令</h1>
    
    <p class="tracked">
      By <strong>
        
        admin
        
      </strong>
    </p>
    
    
    <time class="f6 mv4 dib tracked"
      datetime="2013-08-06T02:31:59Z">August 6, 2013</time>

    
    
    <span class="f6 mv4 dib tracked"> - 3 minutes read</span>
    <span class="f6 mv4 dib tracked"> - 1121 words</span>
    
  </header>
  <div
    class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-100-l"><p>ss命令用来进行统计socket连接的统计。与netstat命令相似。 这个命令之前不常用，甚至没怎么听过，直到有一天不小心想要输入ssh的时候打了ss就回车，结果出来意想不到的好东西，让我决定去学习一下。</p>
<!-- raw HTML omitted -->
<p><strong>SS</strong>能提供的信息包括：</p>
<ol>
<li>
<p>TCP连接</p>
</li>
<li>
<p>UDP连接</p>
</li>
<li>
<p>已经建立的 ssh/ftp/http/https连接</p>
</li>
<li>
<p>本地进程连向X服务器的连接</p>
</li>
<li>
<p>筛选状态(例如connected, synchronized, SYN-RECV, SYN-SENT,TIME-WAIT)、地址和端口</p>
</li>
<li>
<p>所有在FIN-WAIT-1状态下的TCP连接。</p>
</li>
</ol>
<p>大多数linux发行版都涵盖ss命令以及其他一些工具，熟悉这些命令有助于多网络状态的掌握。</p>
<p>下面罗列出一些常用的方法。</p>
<p>{% codeblock %}</p>
<p>$ ss -s #列出所有的socket连接（-s summary）
$ ss -l #列出所有打开的网络端口
$ ss -l | grep 80 #与grep命令一起用把80端口的socket连接信息查出来
$ ss -p #列出使用了socket的进程
$ ss -t -a #列出所有TCP连接
$ ss -u -a #列出所有udp连接
$ ss -o state established &lsquo;(dport = :smtp or sport = :smtp )&rsquo; #列出所有已建立的SMTP连接
$ ss -o state established &lsquo;(dport = :http or sport = :http )&rsquo; #列出所有已建立的http连接
$ ss -x src /tmp/.X11-unix/* #列出所有本地进程连向Xserver的连接
$ ss -o state fin-wait-1 &lsquo;( sport = :http or sport = :https )&rsquo; dst 192.168.1/24 #列出所有在fin-wait-1状态的TCP连接，查看他们的计时器
#关于fin-wait-1，是发出了连接，还没有得到对方的握手信号的状态，
#这时连接不接收应用的发送请求，只接收服务器的反馈信号，
#直到计时器超时</p>
<p>{% endcodeblock %}</p>
<p>关于TCP状态的筛选：</p>
<p>{% codeblock %}</p>
<p>#IPV4
$ ss -4 state [筛选器]
#IPV6
$ ss -6 state [筛选器]</p>
<p>{% endcodeblock %}</p>
<p>筛选器有以下几种</p>
<ul>
<li>
<p>established</p>
</li>
<li>
<p>syn-sent</p>
</li>
<li>
<p>syn-recv</p>
</li>
<li>
<p>fin-wait-1</p>
</li>
<li>
<p>fin-wait-2</p>
</li>
<li>
<p>time-wait</p>
</li>
<li>
<p>closed</p>
</li>
<li>
<p>close-wait</p>
</li>
<li>
<p>last-ack</p>
</li>
<li>
<p>listen</p>
</li>
<li>
<p>closing</p>
</li>
<li>
<p>all : All of the above states</p>
</li>
<li>
<p>connected : All the states except for listen and closed</p>
</li>
<li>
<p>synchronized : All the connected states except for syn-sent</p>
</li>
<li>
<p>bucket : Show states, which are maintained as minisockets, i.e. time-wait and syn-recv.</p>
</li>
<li>
<p>big : Opposite to bucket state. 例如查看已经关闭的IPV4连接的状态：</p>
</li>
</ul>
<p>{% codeblock %}
$ ss -4 state closing
{% endcodeblock %}</p>
<p>根据远程IP地址和端口查看连接信息</p>
<p>{% codeblock %}</p>
<p>$ ss dst 192.168.0.1
$ ss dst 192.168.0.1:http</p>
<p>{% endcodeblock %}</p>
<p>查看本地的地址和端口的连接信息</p>
<p>$ ss src 192.168.0.121
$ ss src 192.168.0.121:http 仅通过端口来查看连接 远端的参数是dport 本地的参数是sport</p>
<p>{% codeblock %}</p>
<p>$ ss dport = :http
$ ss sport = :http
$ ss sport = :80</p>
<p>{% endcodeblock %}</p>
<p>除了等于外还有其他操作符匹配方式：
<strong>&lt;= or le</strong> : Less than or equal to port
<strong>&gt;= or ge</strong> : Greater than or equal to port
<strong>== or eq</strong> : Equal to port
<strong>!= or ne</strong> : Not equal to port
**&lt; or gt **: Less than to port
<strong>&gt; or lt</strong> : Greater than to port
<strong>Note</strong>: le, gt, eq, ne etc. are use in unix shell and are accepted as well.</p>
<p>{% codeblock %}</p>
<p>#注意特殊符号要转义字符
$ ss dport &gt; :1024
$ ss (sport = :http or sport = :https )</p>
<p>{% endcodeblock %}</p>
<p>另外，我之前因为一直使用netstat , 后来发现ss几乎涵盖了netstat的功能，常常困惑着两个有什么不同。</p>
<p>下面是我找到的比较好的答案：</p>
<p>ss command is included in iproute2 package and is the substitute of the command netstat.ss is used to dump socket statistics. It allows showing information similar to netstat. It can display more TCP and state informations than other tools. It is a new, incredibly useful and faster (as compare to netstat) tool for tracking TCP connections and sockets.</p>
<p><strong>Resources from</strong>：<a href="http://www.cyberciti.biz/tips/linux-investigate-sockets-network-connections.html">ss: Display Linux TCP / UDP Network and Socket Information</a></p>
<ul class="pa0">
  
   <li class="list">
     <a href="/tags/linux" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">linux</a>
   </li>
  
   <li class="list">
     <a href="/tags/ss" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">ss</a>
   </li>
  
   <li class="list">
     <a href="/tags/unix" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">unix</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
    </div>
  </div>

  <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/posts/2013/08/05/unixe4b98blsofe591bde4bba4/">UNIX之lsof命令</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/2013/08/02/ubuntu12-04-install-record/">Ubuntu12.04LTS Install Record</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/2012/09/28/linuxe5a49ae7babfe7a88be7bc96e7a88bpthread/">linux多线程编程pthread</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/2012/08/31/e68ea8e88d90/">《unix&amp;linux大学教程》 推荐</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/posts/2012/07/28/fedorae8a385e69cbae6938de4bd9ce8aeb0e5bd95/">fedora装机操作记录</a>
        </li>
	    
    </ul>
</div>

</aside>

</article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://wonderflow.info" >
    &copy;  奇迹之流WonderfloW 2020 
  </a>
    <div>








<a href="https://github.com/wonderflow" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>







</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
